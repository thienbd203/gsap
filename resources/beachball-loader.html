<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>GSAP Beachball Loader</title>
  <style>
    :root {
      --size: 64px;           /* đổi kích thước nhanh: 24px, 48px, 64px, ... */
      --spin-duration: 1.2s;  /* tốc độ quay */
    }

    html, body {
      height: 100%;
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: #0b0c10;
      color: #e8eaed;
    }

    .page {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .card {
      background: #111318;
      border: 1px solid rgba(255,255,255,0.06);
      border-radius: 14px;
      padding: 24px 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.04);
      width: min(520px, 92vw);
    }

    .title {
      margin: 0 0 14px;
      font-weight: 600;
      letter-spacing: 0.2px;
    }

    .row {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .beachball {
      cursor: wait;
      --shadow: rgba(0,0,0,0.22);
      width: var(--size);
      height: var(--size);
      border-radius: 50%;
      position: relative;
      display: inline-block;
      will-change: transform;
      /* Màu rainbow + highlight + shadow để giống beachball */
      background:
        radial-gradient(closest-side, rgba(255,255,255,0.85), rgba(255,255,255,0) 60%) 25% 25%/70% 70% no-repeat,
        radial-gradient(circle at 60% 70%, rgba(0,0,0,0.25), rgba(0,0,0,0) 60%) center/100% 100% no-repeat,
        conic-gradient(
          #ff4d4f 0 60deg,
          #ffec3d 60deg 120deg,
          #52c41a 120deg 180deg,
          #13c2c2 180deg 240deg,
          #1890ff 240deg 300deg,
          #9254de 300deg 360deg
        );
      box-shadow:
        0 8px 18px var(--shadow),
        inset 0 0 8px rgba(0,0,0,0.18);
      transform-style: preserve-3d;
      backface-visibility: hidden;
    }

    /* Vòng sáng nhỏ di chuyển để tạo cảm giác phản chiếu khi quay */
    .beachball::after {
      content: "";
      position: absolute;
      top: 8%;
      left: 18%;
      width: 40%;
      height: 40%;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255,255,255,0.6), rgba(255,255,255,0) 60%);
      filter: blur(0.5px);
      pointer-events: none;
      mix-blend-mode: screen;
      transform-origin: 50% 50%;
    }

    .controls {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-left: auto;
      flex-wrap: wrap;
    }

    button, input[type="range"] {
      appearance: none;
      -webkit-appearance: none;
      border: 1px solid rgba(255,255,255,0.12);
      background: #1a1d25;
      color: #e8eaed;
      border-radius: 10px;
      padding: 8px 12px;
      cursor: pointer;
    }

    input[type="range"] {
      width: 160px;
      height: 10px;
      padding: 0;
    }

    .hint {
      opacity: 0.7;
      font-size: 12px;
      margin-top: 12px;
    }
  </style>
</head>
<body>
  <div class="page">
    <div class="card">
      <h2 class="title">macOS-like Rainbow Wait Cursor (GSAP)</h2>
      <div class="row">
        <div class="beachball" id="beachball"></div>
        <div class="controls">
          <button id="btn-pause">Pause</button>
          <button id="btn-resume">Resume</button>
          <label style="display:flex; align-items:center; gap:8px;">
            <span style="opacity:.75; font-size:12px;">Speed</span>
            <input id="speed" type="range" min="0.2" max="3" step="0.1" value="1.0" />
          </label>
        </div>
      </div>
      <div class="hint">Mẹo: thay kích thước bằng cách đổi biến CSS <code>--size</code> ở <code>:root</code>.</div>
    </div>
  </div>

  <!-- GSAP CDN -->
  <script src="https://unpkg.com/gsap@3/dist/gsap.min.js"></script>
  <script>
    (function() {
      const el = document.getElementById('beachball');

      // Các tween riêng để dễ pause/resume/điều chỉnh tốc độ
      const spin = gsap.to(el, {
        rotation: "+=360",
        duration: 1.2,
        ease: "none",
        repeat: -1,
        transformOrigin: "50% 50%"
      });

      const breathe = gsap.to(el, {
        scale: 1.045,
        duration: 1.6,
        yoyo: true,
        repeat: -1,
        ease: "sine.inOut"
      });

      // Highlight chớp nhẹ theo nhịp thở
      const glare = gsap.to(el, {
        '--glare': 1, // placeholder nếu muốn nối CSS var nâng cao
        duration: 1.6,
        yoyo: true,
        repeat: -1,
        ease: "sine.inOut",
        onUpdate: () => {
          // Lắc nhẹ highlight (pseudo-element) bằng cách xoay nhỏ ::after qua CSS variable
          const p = glare.progress();
          el.style.setProperty('--glare-rot', (p * 8 - 4) + 'deg');
        }
      });

      // API nhỏ cho trang
      const api = {
        pause() { spin.pause(); breathe.pause(); glare.pause(); },
        resume() { spin.resume(); breathe.resume(); glare.resume(); },
        setSpeed(multiplier) {
          // Điều chỉnh speed bằng cách thay đổi timeScale của các tween
          spin.timeScale(multiplier);
          breathe.timeScale(multiplier);
          glare.timeScale(multiplier);
        }
      };
      window.BeachballLoader = api;

      // Hook UI
      document.getElementById('btn-pause').addEventListener('click', api.pause);
      document.getElementById('btn-resume').addEventListener('click', api.resume);
      const speed = document.getElementById('speed');
      speed.addEventListener('input', (e) => api.setSpeed(parseFloat(e.target.value) || 1));

      // Khởi động: đặt speed mặc định
      api.setSpeed(parseFloat(speed.value));
    })();
  </script>
</body>
</html>
